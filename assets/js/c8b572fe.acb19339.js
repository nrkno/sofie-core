"use strict";(self.webpackChunksofie_documentation=self.webpackChunksofie_documentation||[]).push([[9481],{46743:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>n,metadata:()=>d,toc:()=>a});var r=s(62540),i=s(43023);const n={sidebar_position:11},o="System Health",d={id:"user-guide/features/system-health",title:"System Health",description:"Legacy healthcheck",source:"@site/versioned_docs/version-1.50.0/user-guide/features/system-health.md",sourceDirName:"user-guide/features",slug:"/user-guide/features/system-health",permalink:"/sofie-core/docs/1.50.0/user-guide/features/system-health",draft:!1,unlisted:!1,editUrl:"https://github.com/nrkno/sofie-core/edit/master/packages/documentation/versioned_docs/version-1.50.0/user-guide/features/system-health.md",tags:[],version:"1.50.0",sidebarPosition:11,frontMatter:{sidebar_position:11},sidebar:"userGuide",previous:{title:"API",permalink:"/sofie-core/docs/1.50.0/user-guide/features/api"},next:{title:"Getting Started",permalink:"/sofie-core/docs/1.50.0/user-guide/installation/intro"}},c={},a=[{value:"Legacy healthcheck",id:"legacy-healthcheck",level:2},{value:"Prometheus",id:"prometheus",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"system-health",children:"System Health"}),"\n",(0,r.jsx)(t.h2,{id:"legacy-healthcheck",children:"Legacy healthcheck"}),"\n",(0,r.jsxs)(t.p,{children:["There is a legacy ",(0,r.jsx)(t.code,{children:"/health"})," endpoint used by NRK systems. Its use is being phased out and will eventually be replaced by the new prometheus endpoint."]}),"\n",(0,r.jsx)(t.h2,{id:"prometheus",children:"Prometheus"}),"\n",(0,r.jsxs)(t.p,{children:["From version 1.49, there is a prometheus ",(0,r.jsx)(t.code,{children:"/metrics"})," endpoint exposed from Sofie. The metrics exposed from here will increase over time as we find more data to collect."]}),"\n",(0,r.jsxs)(t.p,{children:["Because Sofie is comprised of multiple worker-threads, each metric has a ",(0,r.jsx)(t.code,{children:"threadName"})," label indicitating which it is from. In many cases this field will not matter, but it is useful for the default process metrics, and if your installation has multiple studios defined."]}),"\n",(0,r.jsxs)(t.p,{children:["Each thread exposes some default nodejs process metrics. These are defined by the ",(0,r.jsx)(t.a,{href:"https://github.com/siimon/prom-client#default-metrics",children:(0,r.jsx)(t.code,{children:"prom-client"})})," library we are using, and are best described there."]}),"\n",(0,r.jsx)(t.p,{children:"The current Sofie metrics exposed are:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"name"}),(0,r.jsx)(t.th,{children:"type"}),(0,r.jsx)(t.th,{children:"description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"sofie_meteor_ddp_connections_total"}),(0,r.jsx)(t.td,{children:"Gauge"}),(0,r.jsx)(t.td,{children:"Number of open ddp connections"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"sofie_meteor_publication_subscribers_total"}),(0,r.jsx)(t.td,{children:"Gauge"}),(0,r.jsx)(t.td,{children:"Number of subscribers on a Meteor publication (ignoring arguments)"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"sofie_meteor_jobqueue_queue_total"}),(0,r.jsx)(t.td,{children:"Counter"}),(0,r.jsx)(t.td,{children:"Number of jobs put into each worker job queues"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"sofie_meteor_jobqueue_success"}),(0,r.jsx)(t.td,{children:"Counter"}),(0,r.jsx)(t.td,{children:"Number of successful jobs from each worker"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"sofie_meteor_jobqueue_queue_errors"}),(0,r.jsx)(t.td,{children:"Counter"}),(0,r.jsx)(t.td,{children:"Number of failed jobs from each worker"})]})]})]})]})}function l(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},43023:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>d});var r=s(63696);const i={},n=r.createContext(i);function o(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);