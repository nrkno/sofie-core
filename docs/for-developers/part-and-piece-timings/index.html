<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<title data-react-helmet="true">Part and Piece Timings | Sofie TV Automation Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://nrkno.github.io/sofie-core/img/pilot_fredag-05.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://nrkno.github.io/sofie-core/img/pilot_fredag-05.jpg"><meta data-react-helmet="true" property="og:url" content="https://nrkno.github.io/sofie-core/docs/for-developers/part-and-piece-timings"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Part and Piece Timings | Sofie TV Automation Documentation"><meta data-react-helmet="true" name="description" content="Parts and pieces are the core groups that form the timeline, and define start and end caps for the other timeline objects."><meta data-react-helmet="true" property="og:description" content="Parts and pieces are the core groups that form the timeline, and define start and end caps for the other timeline objects."><link data-react-helmet="true" rel="shortcut icon" href="/sofie-core/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nrkno.github.io/sofie-core/docs/for-developers/part-and-piece-timings"><link data-react-helmet="true" rel="alternate" href="https://nrkno.github.io/sofie-core/docs/for-developers/part-and-piece-timings" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nrkno.github.io/sofie-core/docs/for-developers/part-and-piece-timings" hreflang="x-default"><link rel="stylesheet" href="/sofie-core/assets/css/styles.e80f1943.css">
<link rel="preload" href="/sofie-core/assets/js/runtime~main.c88428b0.js" as="script">
<link rel="preload" href="/sofie-core/assets/js/main.279f6158.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_QVmC">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sofie-core/"><div class="navbar__logo"><img src="/sofie-core/img/sofie-logo.svg" alt="Sofie Logo" class="themedImage_3EHU themedImage--light_heW6"><img src="/sofie-core/img/sofie-logo.svg" alt="Sofie Logo" class="themedImage_3EHU themedImage--dark_6pZL"></div><b class="navbar__title">Sofie TV Automation</b></a><a class="navbar__item navbar__link" href="/sofie-core/docs/user-guide/intro">User Guide</a><a class="navbar__item navbar__link" href="/sofie-core/docs/for-developers/intro">For Developers</a><a class="navbar__item navbar__link" href="/sofie-core/releases">Releases</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/sofie-core/docs/user-guide/intro">Latest</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/sofie-core/docs/for-developers/part-and-piece-timings">Latest</a></li><li><a class="dropdown__link" href="/sofie-core/docs/1.38.0/user-guide/intro">1.38.0</a></li><li><a class="dropdown__link" href="/sofie-core/docs/1.37.0/user-guide/intro">1.37.0</a></li></ul></div><a href="https://github.com/nrkno/sofie-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_OX1T"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_5Cll toggle_pM6S toggleDisabled_suNH"><div class="toggleTrack_6qEH" role="button" tabindex="-1"><div class="toggleTrackCheck_QiMw"><span class="toggleIcon_WliK">ðŸŒœ</span></div><div class="toggleTrackX_9NbQ"><span class="toggleIcon_WliK">ðŸŒž</span></div><div class="toggleTrackThumb_KZ0J"></div></div><input type="checkbox" class="toggleScreenReader_H7wj" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_qWWs"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_THz+" type="button"></button><aside class="docSidebarContainer_uK7U"><div class="sidebar_Fbmv"><nav class="menu thin-scrollbar menu_f6NZ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/for-developers/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/for-developers/api-documentation">API Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/for-developers/contribution-guidelines">Contribution Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/for-developers/for-blueprint-developers">For Blueprint developers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/for-developers/libraries">Applications &amp; Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/sofie-core/docs/for-developers/part-and-piece-timings">Part and Piece Timings</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Dio1"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_FIuA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_Pt0n"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_+ye-"><div class="docItemContainer_G97A"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->Latest</span><div class="tocCollapsible_Rhao theme-doc-toc-mobile tocMobile_HuTu"><button type="button" class="clean-btn tocCollapsibleButton_Rimw">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Part and Piece Timings</h1></header><p>Parts and pieces are the core groups that form the timeline, and define start and end caps for the other timeline objects.</p><p>When referring to the timeline in this page, we mean the built timeline objects that is sent to playout-gateway.<br>
<!-- -->It is made of the previous PartInstance, the current PartInstance and sometimes the next PartInstance.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="the-properties">The properties<a aria-hidden="true" class="hash-link" href="#the-properties" title="Direct link to heading">â€‹</a></h3><p>These are stripped down interfaces, containing only the properties that are relevant for the timeline generation:</p><div class="codeBlockContainer_8r9j"><div class="codeBlockContent_6g8O ts"><pre tabindex="0" class="prism-code language-ts codeBlock_U6z7 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_qR4p"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IBlueprintPart</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Should this item should progress to the next automatically */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autoNext</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** How much to overlap on when doing autonext */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autoNextOverlap</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the inTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inTransition</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IBlueprintPartInTransition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Should we block the inTransition when starting the next Part */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    disableNextInTransition</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the outTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outTransition</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IBlueprintPartOutTransition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Expected duration of the line, in milliseconds */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expectedDuration</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the inTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IBlueprintPartInTransition</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Duration this transition block a take for. After this time, another take is allowed which may cut this transition off early */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    blockTakeDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Duration the previous part be kept playing once the transition is started. Typically the duration of it remaining in-vision */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    previousPartKeepaliveDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Duration the pieces of the part should be delayed for once the transition starts. Typically the duration until the new part is in-vision */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partContentDelayDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the outTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IBlueprintPartOutTransition</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** How long to keep this part alive after taken out  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    duration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">IBlueprintPiece</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Timeline enabler. When the piece should be active on the timeline. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;now&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;now&#x27; is only valid from adlib-actions when inserting into the current part</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        duration</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Whether this piece is a special piece */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pieceType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">IBlueprintPieceType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// from IBlueprintPieceGeneric:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Whether and how the piece is infinite */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lifespan</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">PieceLifespan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * How long this piece needs to prepare its content before it will have an effect on the output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * This allows for flows such as starting a clip playing, then cutting to it after some ms once the player is outputting frames.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prerollDuration</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Special types of pieces. Some are not always used in all circumstances */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> </span><span class="token maybe-class-name">IBlueprintPieceType</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">Normal</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;normal&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">InTransition</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;in-transition&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token maybe-class-name">OutTransition</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;out-transition&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_ycDu clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_XX5z" id="concepts">Concepts<a aria-hidden="true" class="hash-link" href="#concepts" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_XX5z" id="piece-preroll">Piece Preroll<a aria-hidden="true" class="hash-link" href="#piece-preroll" title="Direct link to heading">â€‹</a></h4><p>Often, a Piece will need some time to do some preparation steps on a device before it should be considered as active. A common example is playing a video, as it often takes the player a couple of frames before the first frame is output to SDI.
This can be done with the <code>prerollDuration</code> property on the Piece. A general rule to follow is that it should not have any visible or audible effect on the output until <code>prerollDuration</code> has elapsed into the piece.</p><p>When the timeline is built, the Pieces get their start times adjusted to allow for every Piece in the part to have its preroll time. If you look at the auto-generated pieceGroup timeline objects, their times will rarely match the times specified by the blueprints. Additionally, the previous Part will overlap into the Part long enough for the preroll to complete.</p><p>Try the interactive to see how the prerollDuration properties interact.</p><h4 class="anchor anchorWithStickyNavbar_XX5z" id="in-transition">In Transition<a aria-hidden="true" class="hash-link" href="#in-transition" title="Direct link to heading">â€‹</a></h4><p>The in transition is a special Piece that can be played when taking into a Part. It is represented as a Piece, partly to show the user the transition type and duration, and partly to allow for timeline changes to be applied when the timeline generation thinks appropriate.</p><p>When the <code>inTransition</code> is set on a Part, it will be applied when taking into that Part. During this time, any Pieces with <code>pieceType: IBlueprintPieceType.InTransition</code> will be added to the timeline, and the <code>IBlueprintPieceType.Normal</code> Pieces in the Part will be delayed based on the numbers from <code>inTransition</code></p><p>Try the interactive to see how the an inTransition affects the Piece and Part layout.</p><h4 class="anchor anchorWithStickyNavbar_XX5z" id="out-transition">Out Transition<a aria-hidden="true" class="hash-link" href="#out-transition" title="Direct link to heading">â€‹</a></h4><p>The out transition is a special Piece that gets played when taking out of the Part. It is intended to allow for some &#x27;visual cleanup&#x27; before the take occurs.</p><p>In effect, when <code>outTransition</code> is set on a Part, the take out of the Part will be delayed by the duration defined. During this time, any pieces with <code>pieceType: IBlueprintPieceType.OutTransition</code> will be added to the timeline and will run until the end of the Part.</p><p>Try the interactive to see how this affects the Parts.</p><h4 class="anchor anchorWithStickyNavbar_XX5z" id="autonext">Autonext<a aria-hidden="true" class="hash-link" href="#autonext" title="Direct link to heading">â€‹</a></h4><p>Autonext is a way for a Part to be made a fixed length. After playing for its <code>expectedDuration</code>, core will automatically perform a take into the next part. This is commonly used for fullscreen videos, to exit back to a camera before the video freezes on the last frame. It is enabled by setting the <code>autoNext: true</code> on a Part, and requires <code>expectedDuration</code> to be set to a duration higher than <code>1000</code>.</p><p>In other situations, it can be desirable for a Part to overlap the next one for a few seconds. This is common for Parts such as a title sequence or bumpers, where the sequence ends with an keyer effect which should reveal the next Part.
To achieve this you can set <code>autoNextOverlap: 1000 // ms</code> to make the parts overlap on the timeline. In doing so, the in transition for the next Part will be ignored.</p><p>The <code>autoNextOverlap</code> property can be thought of an override for the intransition on the next part defined as:</p><div class="codeBlockContainer_8r9j"><div class="codeBlockContent_6g8O ts"><pre tabindex="0" class="prism-code language-ts codeBlock_U6z7 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_qR4p"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inTransition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    blockTakeDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partContentDelayDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    previousPartKeepaliveDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_ycDu clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_XX5z" id="infinites">Infinites<a aria-hidden="true" class="hash-link" href="#infinites" title="Direct link to heading">â€‹</a></h4><p>Pieces with an infinite lifespan (ie, not <code>lifespan: PieceLifespan.WithinPart</code>) get handled differently to other pieces.</p><p>Only one pieceGoup is created for an infinite Piece which is present in multiple of the current, next and previous Parts.<br>
<!-- -->The Piece calculates and tracks its own started playback times, which is preserved and reused in future takes. On the timeline it lives outside of the partGroups, but still gets the same caps applied when appropriate.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="interactive-timings-demo">Interactive timings demo<a aria-hidden="true" class="hash-link" href="#interactive-timings-demo" title="Direct link to heading">â€‹</a></h3><div><div style="width:100%;background-size:40px 40px;background-image:linear-gradient(to right, grey 1px, transparent 1px), linear-gradient(to bottom, grey 1px, transparent 1px);overflow-x:hidden;display:flex;flex-direction:column;position:relative"><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:0px;background:pink">In Transition</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:0px;background:lightblue">Out Transition</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:0px;width:240px;background:green">PartGroup A</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:0px;width:240px;background:orange">Piece A</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:260px;background:green">PartGroup B</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:260px;background:orange">Piece B1</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:260px;background:orange">Piece B2</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:270px;width:20px;background:orange">Super B3</div><div style="border-left:2px dashed red;display:inline-block;width:1px;float:left;position:absolute;top:0;height:100%;margin-left:240px" title="Take time">Â </div><div style="border-left:2px dashed red;display:inline-block;width:1px;float:left;position:absolute;top:0;height:100%;margin-left:240px" title="Take Delayed">Â </div><div style="border-left:2px dashed red;display:inline-block;width:1px;float:left;position:absolute;top:0;height:100%;margin-left:240px" title="Content Base time">Â </div></div><table><tr><td>Piece B1 Preroll Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Piece B2 Preroll Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part A Out Transition Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part B In Transition Block Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part B In Transition Contents Delay</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part B In Transition Keepalive</td><td><input type="range" min="0" max="1000" value="0"></td></tr></table></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nrkno/sofie-core/edit/master/packages/documentation/docs/for-developers/part-and-piece-timings.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_glMr" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_D6LQ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/sofie-core/docs/for-developers/libraries"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Applications &amp; Libraries</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_thVJ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-properties" class="table-of-contents__link toc-highlight">The properties</a></li><li><a href="#concepts" class="table-of-contents__link toc-highlight">Concepts</a></li><li><a href="#interactive-timings-demo" class="table-of-contents__link toc-highlight">Interactive timings demo</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/docs/user-guide/intro">User Guide</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/docs/for-developers/intro">For Developers</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/releases">Releases</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/sofietv/shared_invite/enQtNTk2Mzc3MTQ1NzAzLTJkZjMyMDg3OGM0YWU3MmU4YzBhZDAyZWI1YmJmNmRiYWQ1OTZjYTkzOTkzMTA2YTE1YjgxMmVkM2U1OGZlNWI" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Sofie Slack Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_OX1T"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" position="right" href="/sofie-core/docs/about-sofie">About Sofie</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â©2022 Norsk rikskringkasting AS and Contributors</div></div></div></footer></div>
<script src="/sofie-core/assets/js/runtime~main.c88428b0.js"></script>
<script src="/sofie-core/assets/js/main.279f6158.js"></script>
</body>
</html>