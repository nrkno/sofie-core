"use strict";(self.webpackChunksofie_documentation=self.webpackChunksofie_documentation||[]).push([[2521],{5318:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var o=n(7378);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(n),m=i,h=p["".concat(s,".").concat(m)]||p[m]||c[m]||r;return n?o.createElement(h,a(a({ref:t},u),{},{components:n})):o.createElement(h,a({ref:t},u))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:i,a[1]=l;for(var d=2;d<r;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5003:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=n(5773),i=(n(7378),n(5318));const r={description:"The Sofie team happily encourage contributions to the Sofie project, and kindly ask you to observe these guidelines when doing so.",sidebar_position:2},a="Contribution Guidelines",l={unversionedId:"for-developers/contribution-guidelines",id:"for-developers/contribution-guidelines",title:"Contribution Guidelines",description:"The Sofie team happily encourage contributions to the Sofie project, and kindly ask you to observe these guidelines when doing so.",source:"@site/docs/for-developers/contribution-guidelines.md",sourceDirName:"for-developers",slug:"/for-developers/contribution-guidelines",permalink:"/sofie-core/docs/for-developers/contribution-guidelines",draft:!1,editUrl:"https://github.com/nrkno/sofie-core/edit/master/packages/documentation/docs/for-developers/contribution-guidelines.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{description:"The Sofie team happily encourage contributions to the Sofie project, and kindly ask you to observe these guidelines when doing so.",sidebar_position:2},sidebar:"forDevelopers",previous:{title:"Introduction",permalink:"/sofie-core/docs/for-developers/intro"},next:{title:"Introduction",permalink:"/sofie-core/docs/for-developers/for-blueprint-developers/intro"}},s={},d=[{value:"About the Sofie TV Studio Automation Project",id:"about-the-sofie-tv-studio-automation-project",level:2},{value:"About Contributions",id:"about-contributions",level:2},{value:"\u201cDiscussions Before Pull Requests\u201d",id:"discussions-before-pull-requests",level:3},{value:"Base contributions on the in-development branch (or the master branch)",id:"base-contributions-on-the-in-development-branch-or-the-master-branch",level:3},{value:"Developer Guidelines",id:"developer-guidelines",level:2},{value:"Pull Requests",id:"pull-requests",level:3},{value:"Types",id:"types",level:3},{value:"Code Style &amp; Formatting",id:"code-style--formatting",level:3},{value:"Documentation",id:"documentation",level:3},{value:"Updating Dependencies\u200b",id:"updating-dependencies",level:3},{value:"Resolutions\u200b",id:"resolutions",level:3},{value:"Logging",id:"logging",level:3}],u={toc:d},p="wrapper";function c(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"contribution-guidelines"},"Contribution Guidelines"),(0,i.kt)("h2",{id:"about-the-sofie-tv-studio-automation-project"},"About the Sofie TV Studio Automation Project"),(0,i.kt)("p",null,"The Sofie project includes a number of open source applications and libraries developed and maintained by the Norwegian public service broadcaster, ",(0,i.kt)("a",{parentName:"p",href:"https://www.nrk.no/about/"},"NRK"),". Sofie has been used to produce live shows at NRK since September 2018."),(0,i.kt)("p",null,'A list of the "Sofie repositories" ',(0,i.kt)("a",{parentName:"p",href:"/sofie-core/docs/for-developers/libraries"},"can be found here"),". NRK owns the copyright of the contents of the official Sofie repositories, including the source code, related files, as well as the Sofie logo."),(0,i.kt)("p",null,"The Sofie team at NRK is responsible for development and maintenance. We also do thorough testing of each release to avoid regressions in functionality and ensure interoperability with the various hardware and software involved."),(0,i.kt)("p",null,"The Sofie team welcomes open source contributions and will actively work towards enabling contributions to become mergeable into the Sofie repositories. However, as main stakeholder and maintainer we reserve the right to refuse any contributions."),(0,i.kt)("h2",{id:"about-contributions"},"About Contributions"),(0,i.kt)("p",null,"Thank you for considering contributing to the Sofie project!"),(0,i.kt)("p",null,"Before you start, there are a few things you should know:"),(0,i.kt)("h3",{id:"discussions-before-pull-requests"},"\u201cDiscussions Before Pull Requests\u201d"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Minor changes")," (most bug fixes and small features) can be submitted directly as pull requests to the appropriate official repo."),(0,i.kt)("p",null,"However, Sofie is a big project with many differing users and use cases. ",(0,i.kt)("strong",{parentName:"p"},"Larger changes")," might be more difficult to merge into an official repository if NRK has not been made aware of their existence beforehand. To facilitate a timely handling of larger contributions, there\u2019s a workflow intended to keep an open dialogue between all interested parties:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Contributor opens an RFC (as a ",(0,i.kt)("em",{parentName:"li"},"GitHub issue"),") in the appropriate repository."),(0,i.kt)("li",{parentName:"ol"},"NRK evaluates the RFC, usually within a week."),(0,i.kt)("li",{parentName:"ol"},"(If needed) NRK establishes contact with the RFC author, who will be invited to a workshop where the RFC is discussed. Meeting notes are published publicly on the RFC thread."),(0,i.kt)("li",{parentName:"ol"},"The contributor references the RFC when a pull request is ready.")),(0,i.kt)("h3",{id:"base-contributions-on-the-in-development-branch-or-the-master-branch"},"Base contributions on the in-development branch (or the master branch)"),(0,i.kt)("p",null,"In order to facilitate merging, we ask that contributions are based on the latest (at the time of the pull request) ",(0,i.kt)("em",{parentName:"p"},"in-development")," branch (often named ",(0,i.kt)("inlineCode",{parentName:"p"},"release*"),"), alternatively the stable (eg. ",(0,i.kt)("inlineCode",{parentName:"p"},"master"),") branch. NRK will take responsibility for rebasing stable contributions to the latest in-development branch if needed.\nSee ",(0,i.kt)("strong",{parentName:"p"},"CONTRIBUTING.md")," in each official repository for details on which branch to use as a base for contributions."),(0,i.kt)("h2",{id:"developer-guidelines"},"Developer Guidelines"),(0,i.kt)("h3",{id:"pull-requests"},"Pull Requests"),(0,i.kt)("p",null,"We encourage you to open PRs early! If it\u2019s still in development, open the PR as a draft."),(0,i.kt)("h3",{id:"types"},"Types"),(0,i.kt)("p",null,"All official Sofie repositories use TypeScript. When you contribute code, be sure to keep it as strictly typed as possible."),(0,i.kt)("h3",{id:"code-style--formatting"},"Code Style & Formatting"),(0,i.kt)("p",null,"Most of the projects use a linter (eslint) and a formatter (prettier). Before submitting a pull request, please make sure it conforms to the linting rules by running yarn lint. yarn lint --fix can fix most of the issues."),(0,i.kt)("h3",{id:"documentation"},"Documentation"),(0,i.kt)("p",null,"We rely on two types of documentation; the ",(0,i.kt)("a",{parentName:"p",href:"https://nrkno.github.io/sofie-core/"},"Sofie documentation")," (",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nrkno/sofie-core/tree/master/packages/documentation"},"source code"),") and inline code documentation."),(0,i.kt)("p",null,'We don\'t aim to have the "absolute perfect documentation possible", BUT we do try to improve and add documentation to have a good-enough-to-be-comprehensible standard. We think that:'),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"What")," something does is not as important \u2013 we can read the code for that."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Why")," something does something, ",(0,i.kt)("strong",{parentName:"li"},"is")," important. Implied usage, side-effects, descriptions of the context etcetera...")),(0,i.kt)("p",null,"When you contribute, we ask you to also update any documentation where needed."),(0,i.kt)("h3",{id:"updating-dependencies"},"Updating Dependencies\u200b"),(0,i.kt)("p",null,"When updating dependencies in a library, it is preferred to do so via ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn upgrade-interactive --latest")," whenever possible. This is so that the versions in ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," are also updated as we have no guarantee that the library will work with versions lower than that used in the ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn.lock")," file, even if it is compatible with the semver range in ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),". After this, a ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn upgrade")," can be used to update any child dependencies"),(0,i.kt)("p",null,"Be careful when bumping across major versions."),(0,i.kt)("p",null,"Also, each of the libraries has a minimum nodejs version specified in their package.json. Care must be taken when updating dependencies to ensure its compatibility is retained."),(0,i.kt)("h3",{id:"resolutions"},"Resolutions\u200b"),(0,i.kt)("p",null,"We sometimes use the ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn resolutions")," property in ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," to fix security vulnerabilities in dependencies of libraries that haven't released a fix yet. If adding a new one, try to make it as specific as possible to ensure it doesn't have unintended side effects."),(0,i.kt)("p",null,"When updating other dependencies, it is a good idea to make sure that the resolutions defined still apply and are correct."),(0,i.kt)("h3",{id:"logging"},"Logging"),(0,i.kt)("p",null,"When logging, we try to adher to the following guideliness:"),(0,i.kt)("p",null,"Usage of ",(0,i.kt)("inlineCode",{parentName:"p"},"console.log")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"console.error")," directly is discouraged (except for quick debugging locally). Instead, use one of the logger libraries (to output json logs which are easier to index).\nWhen logging, use one of the ",(0,i.kt)("strong",{parentName:"p"},"log level")," described below:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Level"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Examples"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"silly")),(0,i.kt)("td",{parentName:"tr",align:null},"For very detailed logs (rarely used)."),(0,i.kt)("td",{parentName:"tr",align:null},"-")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"debug")),(0,i.kt)("td",{parentName:"tr",align:null},"Logging of info that could be useful for developers when debugging certain issues in production."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"payload: {>JSON<} "'),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},'"Reloading data X from DB"'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"verbose")),(0,i.kt)("td",{parentName:"tr",align:null},"Logging of common events."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"File X updated"'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"info")),(0,i.kt)("td",{parentName:"tr",align:null},"Logging of significant / uncommon events.",(0,i.kt)("br",null),(0,i.kt)("em",{parentName:"td"},"Note: If an event happens often or many times, use ",(0,i.kt)("inlineCode",{parentName:"em"},"verbose")," instead.")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"Initializing TSR..."'),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},'"Starting nightly cronjob..."'),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},'"Snapshot X restored"'),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},"\"Not allowing removal of current playing segment 'xyz', making segment unsynced instead\""),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},'"PeripheralDevice X connected"'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"warn")),(0,i.kt)("td",{parentName:"tr",align:null},"Used when something unexpected happened, but not necessarily due to an application bug.",(0,i.kt)("br",null),"These logs don't have to be acted upon directly, but could be useful to provide context to a dev/sysadmin while troubleshooting an issue."),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},'"PeripheralDevice X disconnected"'),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},'"User Error: Cannot activate Rundown (Rundown not found)" '),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},'"mosRoItemDelete NOT SUPPORTED"'))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"error")),(0,i.kt)("td",{parentName:"tr",align:null},"Used when something went ",(0,i.kt)("em",{parentName:"td"},"wrong"),", preventing something from functioning.",(0,i.kt)("br",null),"A logged ",(0,i.kt)("inlineCode",{parentName:"td"},"error")," should always result in a sysadmin / developer looking into the issue.",(0,i.kt)("br",null),(0,i.kt)("em",{parentName:"td"},"Note: Don't use ",(0,i.kt)("inlineCode",{parentName:"em"},"error")," for things that are out of the app's control, such as user error.")),(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"\"Cannot read property 'length' of undefined\""),(0,i.kt)("br",null),(0,i.kt)("inlineCode",{parentName:"td"},"\"Failed to save Part 'X' to DB\""))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"crit")),(0,i.kt)("td",{parentName:"tr",align:null},"Fatal errors (rarely used)"),(0,i.kt)("td",{parentName:"tr",align:null},"-")))))}c.isMDXComponent=!0}}]);