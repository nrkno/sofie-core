<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.46.0 plugin-docs plugin-id-default docs-doc-id-for-developers/for-blueprint-developers/part-and-piece-timings">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="search" type="application/opensearchdescription+xml" title="Sofie TV Automation Documentation" href="/sofie-core/opensearch.xml"><title data-rh="true">Part and Piece Timings | Sofie TV Automation Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://nrkno.github.io/sofie-core/img/pilot_fredag-05.jpg"><meta data-rh="true" name="twitter:image" content="https://nrkno.github.io/sofie-core/img/pilot_fredag-05.jpg"><meta data-rh="true" property="og:url" content="https://nrkno.github.io/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.46.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.46.0"><meta data-rh="true" name="docsearch:version" content="1.46.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.46.0"><meta data-rh="true" property="og:title" content="Part and Piece Timings | Sofie TV Automation Documentation"><meta data-rh="true" name="description" content="Parts and pieces are the core groups that form the timeline, and define start and end caps for the other timeline objects."><meta data-rh="true" property="og:description" content="Parts and pieces are the core groups that form the timeline, and define start and end caps for the other timeline objects."><link data-rh="true" rel="icon" href="/sofie-core/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://nrkno.github.io/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings"><link data-rh="true" rel="alternate" href="https://nrkno.github.io/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings" hreflang="en"><link data-rh="true" rel="alternate" href="https://nrkno.github.io/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0J21XARTCE-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/sofie-core/assets/css/styles.fc8a9fbd.css">
<link rel="preload" href="/sofie-core/assets/js/runtime~main.9f85ec33.js" as="script">
<link rel="preload" href="/sofie-core/assets/js/main.78b9d4b3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_BxGa">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sofie-core/"><div class="navbar__logo"><img src="/sofie-core/img/sofie-logo.svg" alt="Sofie Logo" class="themedImage_aIr_ themedImage--light_DGIu"><img src="/sofie-core/img/sofie-logo.svg" alt="Sofie Logo" class="themedImage_aIr_ themedImage--dark_RoHN"></div><b class="navbar__title text--truncate">Sofie TV Automation</b></a><a class="navbar__item navbar__link" href="/sofie-core/docs/user-guide/intro">User Guide</a><a class="navbar__item navbar__link" href="/sofie-core/docs/for-developers/intro">For Developers</a><a class="navbar__item navbar__link" href="/sofie-core/releases">Releases</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/sofie-core/docs/1.46.0/user-guide/intro">1.46.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/sofie-core/docs/for-developers/for-blueprint-developers/part-and-piece-timings">Latest</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings">1.46.0</a></li><li><a class="dropdown__link" href="/sofie-core/docs/1.41.0/for-developers/for-blueprint-developers/part-and-piece-timings">1.41.0</a></li><li><a class="dropdown__link" href="/sofie-core/docs/1.38.0/user-guide/intro">1.38.0</a></li><li><a class="dropdown__link" href="/sofie-core/docs/1.37.0/user-guide/intro">1.37.0</a></li></ul></div><a href="https://github.com/nrkno/sofie-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_IT2h colorModeToggle_o_qc"><button class="clean-btn toggleButton_pGki toggleButtonDisabled_vZLo" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_dYsV"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_WRF1"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_WxAN"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_i7DT"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ecpa" type="button"></button><div class="docPage_ECkl"><aside class="theme-doc-sidebar-container docSidebarContainer_cJdQ"><div class="sidebar_Uz2u"><nav class="menu thin-scrollbar menu_XU2j"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.46.0/for-developers/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.46.0/for-developers/contribution-guidelines">Contribution Guidelines</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/intro">For Blueprint Developers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/ab-playback">AB Playback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/hold">Hold</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings">Part and Piece Timings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/timeline-datastore">Timeline Datastore</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.46.0/for-developers/libraries">Applications &amp; Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.46.0/for-developers/api-documentation">API Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.46.0/for-developers/worker-threads-and-locks">Worker Threads &amp; Locks</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Essf"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_bqna"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_tUyt"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_ygLL"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Sofie TV Automation Documentation<!-- --> <b>1.46.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/sofie-core/docs/for-developers/for-blueprint-developers/part-and-piece-timings">latest version</a></b> (<!-- -->Latest<!-- -->).</div></div><div class="docItemContainer_yJzi"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_nmcO" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sofie-core/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_fy9r"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">For Blueprint Developers</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Part and Piece Timings</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.46.0</span><div class="tocCollapsible_mE9n theme-doc-toc-mobile tocMobile_By44"><button type="button" class="clean-btn tocCollapsibleButton_Yex_">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Part and Piece Timings</h1><p>Parts and pieces are the core groups that form the timeline, and define start and end caps for the other timeline objects.</p><p>When referring to the timeline in this page, we mean the built timeline objects that is sent to playout-gateway.<br>
<!-- -->It is made of the previous PartInstance, the current PartInstance and sometimes the next PartInstance.</p><h3 class="anchor anchorWithStickyNavbar_YDjN" id="the-properties">The properties<a class="hash-link" href="#the-properties" title="Direct link to heading">​</a></h3><p>These are stripped down interfaces, containing only the properties that are relevant for the timeline generation:</p><div class="language-ts codeBlockContainer_KHZ4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VL6T"><pre tabindex="0" class="prism-code language-ts codeBlock_Qbkr thin-scrollbar"><code class="codeBlockLines_HKiK"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">IBlueprintPart</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Should this item should progress to the next automatically */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autoNext</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** How much to overlap on when doing autonext */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    autoNextOverlap</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the inTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inTransition</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> IBlueprintPartInTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Should we block the inTransition when starting the next Part */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    disableNextInTransition</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the outTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outTransition</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> IBlueprintPartOutTransition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Expected duration of the line, in milliseconds */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expectedDuration</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the inTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">IBlueprintPartInTransition</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Duration this transition block a take for. After this time, another take is allowed which may cut this transition off early */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    blockTakeDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Duration the previous part be kept playing once the transition is started. Typically the duration of it remaining in-vision */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    previousPartKeepaliveDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Duration the pieces of the part should be delayed for once the transition starts. Typically the duration until the new part is in-vision */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partContentDelayDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Timings for the outTransition, when supported and allowed */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">IBlueprintPartOutTransition</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** How long to keep this part alive after taken out  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    duration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">IBlueprintPiece</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Timeline enabler. When the piece should be active on the timeline. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    enable</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        start</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;now&#x27;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// &#x27;now&#x27; is only valid from adlib-actions when inserting into the current part</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        duration</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Whether this piece is a special piece */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pieceType</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> IBlueprintPieceType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// from IBlueprintPieceGeneric:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/** Whether and how the piece is infinite */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lifespan</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> PieceLifespan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * How long this piece needs to prepare its content before it will have an effect on the output.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * This allows for flows such as starting a clip playing, then cutting to it after some ms once the player is outputting frames.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    prerollDuration</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/** Special types of pieces. Some are not always used in all circumstances */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token plain"> IBlueprintPieceType </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Normal </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;normal&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    InTransition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;in-transition&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    OutTransition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;out-transition&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_uP1X"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_YDjN" id="concepts">Concepts<a class="hash-link" href="#concepts" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_YDjN" id="piece-preroll">Piece Preroll<a class="hash-link" href="#piece-preroll" title="Direct link to heading">​</a></h4><p>Often, a Piece will need some time to do some preparation steps on a device before it should be considered as active. A common example is playing a video, as it often takes the player a couple of frames before the first frame is output to SDI.
This can be done with the <code>prerollDuration</code> property on the Piece. A general rule to follow is that it should not have any visible or audible effect on the output until <code>prerollDuration</code> has elapsed into the piece.</p><p>When the timeline is built, the Pieces get their start times adjusted to allow for every Piece in the part to have its preroll time. If you look at the auto-generated pieceGroup timeline objects, their times will rarely match the times specified by the blueprints. Additionally, the previous Part will overlap into the Part long enough for the preroll to complete.</p><p>Try the interactive to see how the prerollDuration properties interact.</p><h4 class="anchor anchorWithStickyNavbar_YDjN" id="in-transition">In Transition<a class="hash-link" href="#in-transition" title="Direct link to heading">​</a></h4><p>The in transition is a special Piece that can be played when taking into a Part. It is represented as a Piece, partly to show the user the transition type and duration, and partly to allow for timeline changes to be applied when the timeline generation thinks appropriate.</p><p>When the <code>inTransition</code> is set on a Part, it will be applied when taking into that Part. During this time, any Pieces with <code>pieceType: IBlueprintPieceType.InTransition</code> will be added to the timeline, and the <code>IBlueprintPieceType.Normal</code> Pieces in the Part will be delayed based on the numbers from <code>inTransition</code></p><p>Try the interactive to see how the an inTransition affects the Piece and Part layout.</p><h4 class="anchor anchorWithStickyNavbar_YDjN" id="out-transition">Out Transition<a class="hash-link" href="#out-transition" title="Direct link to heading">​</a></h4><p>The out transition is a special Piece that gets played when taking out of the Part. It is intended to allow for some &#x27;visual cleanup&#x27; before the take occurs.</p><p>In effect, when <code>outTransition</code> is set on a Part, the take out of the Part will be delayed by the duration defined. During this time, any pieces with <code>pieceType: IBlueprintPieceType.OutTransition</code> will be added to the timeline and will run until the end of the Part.</p><p>Try the interactive to see how this affects the Parts.</p><h3 class="anchor anchorWithStickyNavbar_YDjN" id="piece-postroll">Piece postroll<a class="hash-link" href="#piece-postroll" title="Direct link to heading">​</a></h3><p>Sometimes rather than extending all the pieces and playing an out transition piece on top we want all pieces to stop except for 1, this has the same goal of &#x27;visual cleanup&#x27; as the out transition but works slightly different. The main concept is that an out transition delays the take slightly but with postroll the take executes normally however the pieces with postroll will keep playing for a bit after the take.</p><p>When the <code>postrollDuration</code> is set on a piece the part group will be extended slightly allowing pieces to play a little longer, however any piece that do not have postroll will end at their regular time.</p><h4 class="anchor anchorWithStickyNavbar_YDjN" id="autonext">Autonext<a class="hash-link" href="#autonext" title="Direct link to heading">​</a></h4><p>Autonext is a way for a Part to be made a fixed length. After playing for its <code>expectedDuration</code>, core will automatically perform a take into the next part. This is commonly used for fullscreen videos, to exit back to a camera before the video freezes on the last frame. It is enabled by setting the <code>autoNext: true</code> on a Part, and requires <code>expectedDuration</code> to be set to a duration higher than <code>1000</code>.</p><p>In other situations, it can be desirable for a Part to overlap the next one for a few seconds. This is common for Parts such as a title sequence or bumpers, where the sequence ends with an keyer effect which should reveal the next Part.
To achieve this you can set <code>autoNextOverlap: 1000 // ms</code> to make the parts overlap on the timeline. In doing so, the in transition for the next Part will be ignored.</p><p>The <code>autoNextOverlap</code> property can be thought of an override for the intransition on the next part defined as:</p><div class="language-ts codeBlockContainer_KHZ4 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_VL6T"><pre tabindex="0" class="prism-code language-ts codeBlock_Qbkr thin-scrollbar"><code class="codeBlockLines_HKiK"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> inTransition </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    blockTakeDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    partContentDelayDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    previousPartKeepaliveDuration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_uP1X"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Uqyx" aria-hidden="true"><svg class="copyButtonIcon_CtfL" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_Mq1p" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_YDjN" id="infinites">Infinites<a class="hash-link" href="#infinites" title="Direct link to heading">​</a></h4><p>Pieces with an infinite lifespan (ie, not <code>lifespan: PieceLifespan.WithinPart</code>) get handled differently to other pieces.</p><p>Only one pieceGoup is created for an infinite Piece which is present in multiple of the current, next and previous Parts.<br>
<!-- -->The Piece calculates and tracks its own started playback times, which is preserved and reused in future takes. On the timeline it lives outside of the partGroups, but still gets the same caps applied when appropriate.</p><h3 class="anchor anchorWithStickyNavbar_YDjN" id="interactive-timings-demo">Interactive timings demo<a class="hash-link" href="#interactive-timings-demo" title="Direct link to heading">​</a></h3><p>Use the sliders below to see how various Preroll and In &amp; Out Transition timing properties interact with each other.</p><div><div style="width:100%;background-size:40px 40px;background-image:linear-gradient(to right, grey 1px, transparent 1px), linear-gradient(to bottom, grey 1px, transparent 1px);overflow-x:hidden;display:flex;flex-direction:column;position:relative"><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:0px;background:pink">In Transition</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:0px;background:lightblue">Out Transition</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:0px;width:240px;background:green">PartGroup A</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:0px;width:240px;background:orange">Piece A1</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:0px;width:240px;background:orange">Piece A2</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:260px;background:green">PartGroup B</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:260px;background:orange">Piece B1</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:240px;width:260px;background:orange">Piece B2</div><div style="height:25px;margin-bottom:2px;white-space:nowrap;margin-left:270px;width:20px;background:orange">Super B3</div><div style="border-left:2px dashed red;display:inline-block;width:1px;float:left;position:absolute;top:0;height:100%;margin-left:240px" title="Take time"> </div><div style="border-left:2px dashed red;display:inline-block;width:1px;float:left;position:absolute;top:0;height:100%;margin-left:240px" title="Take Delayed"> </div><div style="border-left:2px dashed red;display:inline-block;width:1px;float:left;position:absolute;top:0;height:100%;margin-left:240px" title="Content Base time"> </div></div><table class="margin-top--md"><tr><td>Piece B1 Preroll Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Piece B2 Preroll Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Piece A1 Postroll Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Piece A2 Postroll Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part A Out Transition Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part B In Transition Block Duration</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part B In Transition Contents Delay</td><td><input type="range" min="0" max="1000" value="0"></td></tr><tr><td>Part B In Transition Keepalive</td><td><input type="range" min="0" max="1000" value="0"></td></tr></table></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nrkno/sofie-core/edit/master/packages/documentation/versioned_docs/version-1.46.0/for-developers/for-blueprint-developers/part-and-piece-timings.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_OMbO" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vA0S"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/hold"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Hold</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/sofie-core/docs/1.46.0/for-developers/for-blueprint-developers/timeline-datastore"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Timeline Datastore</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jWtb thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-properties" class="table-of-contents__link toc-highlight">The properties</a></li><li><a href="#concepts" class="table-of-contents__link toc-highlight">Concepts</a></li><li><a href="#piece-postroll" class="table-of-contents__link toc-highlight">Piece postroll</a></li><li><a href="#interactive-timings-demo" class="table-of-contents__link toc-highlight">Interactive timings demo</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/docs/user-guide/intro">User Guide</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/docs/for-developers/intro">For Developers</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/releases">Releases</a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://join.slack.com/t/sofietv/shared_invite/enQtNTk2Mzc3MTQ1NzAzLTJkZjMyMDg3OGM0YWU3MmU4YzBhZDAyZWI1YmJmNmRiYWQ1OTZjYTkzOTkzMTA2YTE1YjgxMmVkM2U1OGZlNWI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Sofie Slack Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_GWqj"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" position="right" href="/sofie-core/docs/about-sofie">About Sofie</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ©2023 Norsk rikskringkasting AS and Contributors</div></div></div></footer></div>
<script src="/sofie-core/assets/js/runtime~main.9f85ec33.js"></script>
<script src="/sofie-core/assets/js/main.78b9d4b3.js"></script>
</body>
</html>