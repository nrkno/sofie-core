<!doctype html>
<html class="docs-version-1.38.0" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<title data-react-helmet="true">Concepts &amp; Architecture | Sofie TV Automation Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://nrkno.github.io/sofie-core/img/pilot_fredag-05.jpg"><meta data-react-helmet="true" name="twitter:image" content="https://nrkno.github.io/sofie-core/img/pilot_fredag-05.jpg"><meta data-react-helmet="true" property="og:url" content="https://nrkno.github.io/sofie-core/docs/1.38.0/user-guide/concepts-and-architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="1.38.0"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-1.38.0"><meta data-react-helmet="true" property="og:title" content="Concepts &amp; Architecture | Sofie TV Automation Documentation"><meta data-react-helmet="true" name="description" content="System Architecture"><meta data-react-helmet="true" property="og:description" content="System Architecture"><link data-react-helmet="true" rel="shortcut icon" href="/sofie-core/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nrkno.github.io/sofie-core/docs/1.38.0/user-guide/concepts-and-architecture"><link data-react-helmet="true" rel="alternate" href="https://nrkno.github.io/sofie-core/docs/1.38.0/user-guide/concepts-and-architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nrkno.github.io/sofie-core/docs/1.38.0/user-guide/concepts-and-architecture" hreflang="x-default"><link rel="stylesheet" href="/sofie-core/assets/css/styles.e80f1943.css">
<link rel="preload" href="/sofie-core/assets/js/runtime~main.117ccbe9.js" as="script">
<link rel="preload" href="/sofie-core/assets/js/main.fb31a504.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_QVmC">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sofie-core/"><div class="navbar__logo"><img src="/sofie-core/img/sofie-logo.svg" alt="Sofie Logo" class="themedImage_3EHU themedImage--light_heW6"><img src="/sofie-core/img/sofie-logo.svg" alt="Sofie Logo" class="themedImage_3EHU themedImage--dark_6pZL"></div><b class="navbar__title">Sofie TV Automation</b></a><a class="navbar__item navbar__link" href="/sofie-core/docs/user-guide/intro">User Guide</a><a class="navbar__item navbar__link" href="/sofie-core/docs/for-developers/intro">For Developers</a><a class="navbar__item navbar__link" href="/sofie-core/releases">Releases</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/sofie-core/docs/1.38.0/user-guide/intro">1.38.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/sofie-core/docs/user-guide/concepts-and-architecture">Latest</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/sofie-core/docs/1.38.0/user-guide/concepts-and-architecture">1.38.0</a></li><li><a class="dropdown__link" href="/sofie-core/docs/1.37.0/user-guide/concepts-and-architecture">1.37.0</a></li></ul></div><a href="https://github.com/nrkno/sofie-core" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_OX1T"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_5Cll toggle_pM6S toggleDisabled_suNH"><div class="toggleTrack_6qEH" role="button" tabindex="-1"><div class="toggleTrackCheck_QiMw"><span class="toggleIcon_WliK">ðŸŒœ</span></div><div class="toggleTrackX_9NbQ"><span class="toggleIcon_WliK">ðŸŒž</span></div><div class="toggleTrackThumb_KZ0J"></div></div><input type="checkbox" class="toggleScreenReader_H7wj" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_qWWs"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_THz+" type="button"></button><aside class="docSidebarContainer_uK7U"><div class="sidebar_Fbmv"><nav class="menu thin-scrollbar menu_f6NZ"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.38.0/user-guide/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/sofie-core/docs/1.38.0/user-guide/concepts-and-architecture">Concepts &amp; Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Features</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.38.0/user-guide/supported-devices">Supported Playout Devices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.38.0/user-guide/faq">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/sofie-core/docs/1.38.0/user-guide/further-reading">Further Reading</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_Dio1"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_FIuA"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_Pt0n"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_+ye-"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Sofie TV Automation Documentation<!-- --> <b>1.38.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/sofie-core/docs/user-guide/concepts-and-architecture">latest version</a></b> (<!-- -->Latest<!-- -->).</div></div><div class="docItemContainer_G97A"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->1.38.0</span><div class="tocCollapsible_Rhao theme-doc-toc-mobile tocMobile_HuTu"><button type="button" class="clean-btn tocCollapsibleButton_Rimw">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Concepts &amp; Architecture</h1></header><h2 class="anchor anchorWithStickyNavbar_XX5z" id="system-architecture">System Architecture<a aria-hidden="true" class="hash-link" href="#system-architecture" title="Direct link to heading">â€‹</a></h2><p><img alt="Example of a Sofie setup with a Playout Gateway and a Spreadsheet Gateway" src="/sofie-core/assets/images/playout-and-spreadsheet-example-b12546e2be214cfc445edd06b67e9633.png"></p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="sofie-core">Sofie Core<a aria-hidden="true" class="hash-link" href="#sofie-core" title="Direct link to heading">â€‹</a></h3><p><strong>Sofie<!-- -->Â <!-- -->Core</strong> is a web server which handle business logic and serves the web GUI.<br>
<!-- -->It is a <a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">NodeJS</a> process backed up by a <a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB</a> database and based on the framework <a href="http://meteor.com/" target="_blank" rel="noopener noreferrer">Meteor</a>.  </p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="gateways">Gateways<a aria-hidden="true" class="hash-link" href="#gateways" title="Direct link to heading">â€‹</a></h3><p>Gateways are applications that connect to Sofie<!-- -->Â <!-- -->Core and and exchanges data; such as rundown data from an NRCS or the <a href="#timeline">Timeline</a> for playout.</p><p>An examples of a gateways is the <a href="https://github.com/SuperFlyTV/spreadsheet-gateway" target="_blank" rel="noopener noreferrer">Spreadsheet Gateway</a>.<br>
<!-- -->All gateways use the <a href="https://github.com/nrkno/sofie-core/tree/master/packages/server-core-integration" target="_blank" rel="noopener noreferrer">Core Integration Library</a> to communicate with Core.</p><h2 class="anchor anchorWithStickyNavbar_XX5z" id="system-organization-studio--show-style">System, <!-- -->(<!-- -->Organization<!-- -->)<!-- -->, Studio &amp; Show Style<a aria-hidden="true" class="hash-link" href="#system-organization-studio--show-style" title="Direct link to heading">â€‹</a></h2><p>To be able to facilitate various workflows and to Here&#x27;s a short explanation about the differences between the &quot;System&quot;, &quot;Organization&quot;, &quot;Studio&quot; and &quot;Show Style&quot;.</p><ul><li>The <strong>System</strong> defines the whole of the Sofie<!-- -->Â <!-- -->Core</li><li>The <strong>Organization</strong> <!-- -->(<!-- -->only available if user accounts are enabled<!-- -->)<!-- --> defines things that are common for an organization. An organization consists of: <strong>Users, Studios</strong> and <strong>ShowStyles</strong>.</li><li>The <strong>Studio</strong> contains things that are related to the &quot;hardware&quot; or &quot;rig&quot;. Technically, a Studio is defined as an entity that can have one <!-- -->(<!-- -->or none<!-- -->)<!-- --> rundown active at any given time. In most cases, this will be a representation of your gallery, with cameras, video playback and graphics systems, external inputs, sound mixers, lighting controls and so on. A single System can easily control multiple Studios.</li><li>The <strong>Show Style</strong> contains settings for the &quot;show&quot;, for example if there&#x27;s a &quot;Morning Show&quot; and an &quot;Afternoon Show&quot; - produced in the same gallery - they might be two different Show Styles <!-- -->(<!-- -->played in the same Studio<!-- -->)<!-- -->.</li></ul><p><img alt="Sofie Architecture Venn Diagram" src="/sofie-core/assets/images/sofie-venn-diagram-f65669f7bddbd15ccd14d007227ab776.png"></p><h2 class="anchor anchorWithStickyNavbar_XX5z" id="playlists-rundowns-segments-parts-pieces">Playlists, Rundowns, Segments, Parts, Pieces<a aria-hidden="true" class="hash-link" href="#playlists-rundowns-segments-parts-pieces" title="Direct link to heading">â€‹</a></h2><p><img alt="Playlists, Rundowns, Segments, Parts, Pieces" src="/sofie-core/assets/images/playlist-rundown-segment-part-piece-121969698d8ff1f70338aa2591a0dea5.png"></p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="playlist">Playlist<a aria-hidden="true" class="hash-link" href="#playlist" title="Direct link to heading">â€‹</a></h3><p>A Playlist <!-- -->(<!-- -->or &quot;Rundown Playlist&quot;<!-- -->)<!-- --> is the entity that &quot;goes on air&quot; and controls the playhead/Take Point.</p><p>It contains one or several Rundowns inside, which are playout out in order.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>In some many studios, there is only ever one rundown in a playlist. In those cases, we sometimes lazily refer to playlists and rundowns as &quot;being the same thing&quot;.</p></div></div><p>A Playlist is played out in the context of it&#x27;s <a href="#studio">Studio</a>, thereby only a single Playlist can be active at a time within each Studio.</p><p>A playlist is normally played through and then ends but it is also possible to make looping playlists in which case the playlist will start over from the top after the last part has been played.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="rundown">Rundown<a aria-hidden="true" class="hash-link" href="#rundown" title="Direct link to heading">â€‹</a></h3><p>The Rundown contains the content for a show. It contains Segments and Parts, which can be selected by the user to be played out.<br>
<!-- -->A Rundown always has a <a href="#showstyle">showstyle</a> and is played out in the context of the <a href="#studio">Studio</a> of its Playlist.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="segment">Segment<a aria-hidden="true" class="hash-link" href="#segment" title="Direct link to heading">â€‹</a></h3><p>The Segment is the horizontal line in the GUI. It is intended to be used as a &quot;chapter&quot; or &quot;subject&quot; in a rundown, where each individual playable element in the Segment is called a <a href="#part">Part</a>.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="part">Part<a aria-hidden="true" class="hash-link" href="#part" title="Direct link to heading">â€‹</a></h3><p>The Part is the playable element inside of a <a href="#segment">Segment</a>. This is the thing that starts playing when the user does a <a href="#take-point">TAKE</a>.<br>
<!-- -->The Part in itself doesn&#x27;t determine what&#x27;s going to happen, that&#x27;s handled by the <a href="#piece">Pieces</a> in it.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="piece">Piece<a aria-hidden="true" class="hash-link" href="#piece" title="Direct link to heading">â€‹</a></h3><p>The Pieces inside of a Part determines what&#x27;s going to happen, the could be indicating things like VT:s, cut to cameras, graphics, or what script the host is going to read.</p><p>Inside of the pieces are the <a href="#timeline-object">timeline-objects</a> which controls the playout on a technical level.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Tip! If you want to manually play a certain piece <!-- -->(<!-- -->for example a graphics overlay<!-- -->)<!-- -->, you can at any time double-click it in the GUI, and it will be copied and played at your play head, just like an <a href="#adlib-pieces">AdLib</a> would!</p></div></div><p>See also: <a href="#showstyle">Showstyle</a></p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="adlib-piece">AdLib Piece<a aria-hidden="true" class="hash-link" href="#adlib-piece" title="Direct link to heading">â€‹</a></h3><p>The AdLib pieces are Pieces that isn&#x27;t programmed to fire at a specific time, but instead intended to be manually triggered by the user.</p><p>The AdLib pieces can either come from the currently playing Part, or it could be <em>global AdLibs</em> that are available throughout the show.</p><p>An AdLib isn&#x27;t added to the Part in the GUI until it starts playing, instead you find it in the <a href="#shelf">Shelf</a>.</p><h2 class="anchor anchorWithStickyNavbar_XX5z" id="views">Views<a aria-hidden="true" class="hash-link" href="#views" title="Direct link to heading">â€‹</a></h2><p>Being a web-based system, Sofie has a number of customisable, user-facing web <a href="/sofie-core/docs/1.38.0/user-guide/features/sofie-views">views</a> used for control and monitoring.</p><h2 class="anchor anchorWithStickyNavbar_XX5z" id="blueprints">Blueprints<a aria-hidden="true" class="hash-link" href="#blueprints" title="Direct link to heading">â€‹</a></h2><p>Blueprints are plug-ins that run in Sofie<!-- -->Â <!-- -->Core. They interpret the data coming in from the rundowns and transform them into a rich set of playable elements <!-- -->(<!-- -->Segments, Parts, AdLibs etc<!-- -->)<!-- -->.</p><p>The blueprints are webpacked javascript bundles which are uploaded into Sofie via the GUI. They are custom-made and changes depending on the show style, type of input data <!-- -->(<!-- -->NRCS<!-- -->)<!-- --> and the types of controlled devices. A generic <a href="https://github.com/SuperFlyTV/sofie-demo-blueprints" target="_blank" rel="noopener noreferrer">blueprint that works with spreadsheets is available here</a>.</p><p>When <a href="#sofie-core">Sofie<!-- -->Â <!-- -->Core</a> calls upon a Blueprint, it returns a JavaScript object containing methods callable by Sofie<!-- -->Â <!-- -->Core. These methods will be called by Sofie<!-- -->Â <!-- -->Core in different situations, depending on the method.<br>
<!-- -->Documentation on these interfaces are available in the <a href="https://www.npmjs.com/package/tv-automation-sofie-blueprints-integration" target="_blank" rel="noopener noreferrer">Blueprints integration</a> library.</p><p>There are 3 types of blueprints, and all 3 must be uploaded into Sofie before the system will work correctly.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="system-blueprints">System Blueprints<a aria-hidden="true" class="hash-link" href="#system-blueprints" title="Direct link to heading">â€‹</a></h3><p>Handle things on the <em>System level</em>.<br>
<!-- -->Documentation on the interface to be exposed by the Blueprint:<br>
<a href="https://github.com/nrkno/sofie-sofie-blueprints-integration/blob/master/src/api.ts#L52" target="_blank" rel="noopener noreferrer">https://github.com/nrkno/sofie-sofie-blueprints-integration/blob/master/src/api.ts<!-- -->#<!-- -->L52</a></p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="studio-blueprints">Studio Blueprints<a aria-hidden="true" class="hash-link" href="#studio-blueprints" title="Direct link to heading">â€‹</a></h3><p>Handle things on the <em>Studio level</em>, like &quot;which showstyle to use for this rundown&quot;.<br>
<!-- -->Documentation on the interface to be exposed by the Blueprint:<br>
<a href="https://github.com/nrkno/sofie-sofie-blueprints-integration/blob/master/src/api.ts#L57" target="_blank" rel="noopener noreferrer">https://github.com/nrkno/sofie-sofie-blueprints-integration/blob/master/src/api.ts<!-- -->#<!-- -->L57</a></p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="showstyle-blueprints">Showstyle Blueprints<a aria-hidden="true" class="hash-link" href="#showstyle-blueprints" title="Direct link to heading">â€‹</a></h3><p>Handle things on the <em>Showstyle level</em>, like generating <a href="#baseline"><em>Baseline</em></a>, <em>Segments</em>, <em>Parts, Pieces</em> and <em>Timelines</em> in a rundown.<br>
<!-- -->Documentation on the interface to be exposed by the Blueprint:<br>
<a href="https://github.com/nrkno/sofie-sofie-blueprints-integration/blob/master/src/api.ts#L72" target="_blank" rel="noopener noreferrer">https://github.com/nrkno/sofie-sofie-blueprints-integration/blob/master/src/api.ts<!-- -->#<!-- -->L72</a></p><h2 class="anchor anchorWithStickyNavbar_XX5z" id="timeline">Timeline<a aria-hidden="true" class="hash-link" href="#timeline" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_XX5z" id="what-is-the-timeline">What is the timeline?<a aria-hidden="true" class="hash-link" href="#what-is-the-timeline" title="Direct link to heading">â€‹</a></h3><p>The Timeline is a collection of timeline-objects, that together form a &quot;target state&quot;, i.e. an intent on what is to be played and at what times.</p><p>The timeline-objects can be programmed to contain relative references to each other, so programming things like <em>&quot;play this thing right after this other thing&quot;</em> is as easy as <code>{start: { #otherThing.end }}</code></p><p>The <a href="/sofie-core/docs/1.38.0/for-developers/libraries">Playout Gateway</a> picks up the timeline from Sofie<!-- -->Â <!-- -->Core and <!-- -->(<!-- -->using the <a href="https://github.com/nrkno/sofie-timeline-state-resolver" target="_blank" rel="noopener noreferrer">TSR timeline-state-resolver</a>)<!-- --> controls the playout devices to make sure that they actually play what is intended.</p><p><img alt="Example of 2 objects in a timeline: The #video object, destined to play at a certain time, and #gfx0, destined to start 15 seconds into the video." src="/sofie-core/assets/images/timeline-d1a95c05adc953f15adae8a0e3aaaf48.png"></p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="why-a-timeline">Why a timeline?<a aria-hidden="true" class="hash-link" href="#why-a-timeline" title="Direct link to heading">â€‹</a></h3><p>The Sofie system is made to work with a modern web- and IT-based approach in mind. Therefore, the Sofie<!-- -->Â <!-- -->Core can be run either on-site, or in an off-site cloud.</p><p><img alt="SofieÂ Core can run in the cloud" src="/sofie-core/assets/images/sofie-web-architecture-812d04b46362f24b9f1965b7a92078e1.png"></p><p>One drawback of running in a cloud over the public internet is the - sometimes unpredictable - latency. The Timeline overcomes this by moving all the immediate control of the playout devices to the Playout Gateway, which is intended to run on a local network, close to the hardware it controls.<br>
<!-- -->This also gives the system a simple way of load-balancing - since the number of web-clients or load on Sofie<!-- -->Â <!-- -->Core won&#x27;t affect the playout.</p><p>Another benefit of basing the playout on a timeline is that when programming the show <!-- -->(<!-- -->the blueprints<!-- -->)<!-- -->, you only have to care about &quot;what you want to be on screen&quot;, you don&#x27;t have to care about cleaning up previously played things, or what was actually played out before. Those are things that are handled by the Playout Gateway automatically. This also allows the user to jump around in a rundown freely, without the risk of things going wrong on air.</p><h3 class="anchor anchorWithStickyNavbar_XX5z" id="how-does-it-work">How does it work?<a aria-hidden="true" class="hash-link" href="#how-does-it-work" title="Direct link to heading">â€‹</a></h3><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Fun tip! The timeline in itself is a <a href="https://github.com/SuperFlyTV/supertimeline" target="_blank" rel="noopener noreferrer">separate library available on github</a>.</p><p>You can play around with the timeline in the browser using <a href="https://jsfiddle.net/nytamin/rztp517u/" target="_blank" rel="noopener noreferrer">JSFiddle and the timeline-visualizer</a>!</p></div></div><p>The Timeline is stored by Sofie<!-- -->Â <!-- -->Core in a MongoDB collection. It is generated whenever a user does a <a href="#take-point">Take</a>, changes the <a href="#next-point-and-lookahead">Next-point</a> or anything else that might affect the playout.</p><p><em>Sofie<!-- -->Â <!-- -->Core</em> generates the timeline using:</p><ul><li>The <a href="#baseline">Studio Baseline</a> <!-- -->(<!-- -->only if no rundown is currently active<!-- -->)</li><li>The <a href="#baseline">Showstyle Baseline</a>, of the currently active rundown.</li><li>The <a href="#take-point">currently playing Part</a></li><li>The <a href="#next-point-and-lookahead">Next:ed Part</a> and Parts that come after it <!-- -->(<!-- -->the <a href="#lookahead">Lookahead</a>)</li><li>Any <a href="#adlib-pieces">AdLibs</a> the user has manually selected to play</li></ul><p>The <a href="/sofie-core/docs/1.38.0/for-developers/libraries#gateways"><strong>Playout Gateway</strong></a> then picks up the new timeline, and pipes it into the <a href="https://github.com/nrkno/sofie-timeline-state-resolver" target="_blank" rel="noopener noreferrer">(<!-- -->TSR<!-- -->)<!-- --> timeline-state-resolver</a> library.</p><p>The TSR then...</p><ul><li>Resolves the timeline, using the <a href="https://github.com/SuperFlyTV/supertimeline" target="_blank" rel="noopener noreferrer">timeline-library</a></li><li>Calculates new target-states for each relevant point in time</li><li>Maps the target-state to each playout device.</li><li>Compares the target-states for each device with the currently-tracked-state and..</li><li>..generates commands to send to each device to account for the change.</li><li>The commands are then put on queue and sent to the devices at the correct time.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>For more information about what playout devices the <em>TSR</em> supports, and examples of the timeline-objects, see the <a href="https://github.com/nrkno/sofie-timeline-state-resolver#timeline-state-resolver" target="_blank" rel="noopener noreferrer">README of TSR</a></p></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>For more information about how to program timeline-objects, see the <a href="https://github.com/SuperFlyTV/supertimeline#superfly-timeline" target="_blank" rel="noopener noreferrer">README of the timeline-library</a></p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nrkno/sofie-core/edit/master/packages/documentation/versioned_docs/version-1.38.0/user-guide/concepts-and-architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_glMr" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_D6LQ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/sofie-core/docs/1.38.0/user-guide/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/sofie-core/docs/1.38.0/user-guide/configuration/sofie-core-settings"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sofie Core: System Configuration<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_thVJ thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#system-architecture" class="table-of-contents__link toc-highlight">System Architecture</a><ul><li><a href="#sofie-core" class="table-of-contents__link toc-highlight">Sofie Core</a></li><li><a href="#gateways" class="table-of-contents__link toc-highlight">Gateways</a></li></ul></li><li><a href="#system-organization-studio--show-style" class="table-of-contents__link toc-highlight">System, (Organization), Studio &amp; Show Style</a></li><li><a href="#playlists-rundowns-segments-parts-pieces" class="table-of-contents__link toc-highlight">Playlists, Rundowns, Segments, Parts, Pieces</a><ul><li><a href="#playlist" class="table-of-contents__link toc-highlight">Playlist</a></li><li><a href="#rundown" class="table-of-contents__link toc-highlight">Rundown</a></li><li><a href="#segment" class="table-of-contents__link toc-highlight">Segment</a></li><li><a href="#part" class="table-of-contents__link toc-highlight">Part</a></li><li><a href="#piece" class="table-of-contents__link toc-highlight">Piece</a></li><li><a href="#adlib-piece" class="table-of-contents__link toc-highlight">AdLib Piece</a></li></ul></li><li><a href="#views" class="table-of-contents__link toc-highlight">Views</a></li><li><a href="#blueprints" class="table-of-contents__link toc-highlight">Blueprints</a><ul><li><a href="#system-blueprints" class="table-of-contents__link toc-highlight">System Blueprints</a></li><li><a href="#studio-blueprints" class="table-of-contents__link toc-highlight">Studio Blueprints</a></li><li><a href="#showstyle-blueprints" class="table-of-contents__link toc-highlight">Showstyle Blueprints</a></li></ul></li><li><a href="#timeline" class="table-of-contents__link toc-highlight">Timeline</a><ul><li><a href="#what-is-the-timeline" class="table-of-contents__link toc-highlight">What is the timeline?</a></li><li><a href="#why-a-timeline" class="table-of-contents__link toc-highlight">Why a timeline?</a></li><li><a href="#how-does-it-work" class="table-of-contents__link toc-highlight">How does it work?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/docs/user-guide/intro">User Guide</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/docs/for-developers/intro">For Developers</a></li><li class="footer__item"><a class="footer__link-item" position="left" href="/sofie-core/releases">Releases</a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/sofietv/shared_invite/enQtNTk2Mzc3MTQ1NzAzLTJkZjMyMDg3OGM0YWU3MmU4YzBhZDAyZWI1YmJmNmRiYWQ1OTZjYTkzOTkzMTA2YTE1YjgxMmVkM2U1OGZlNWI" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Sofie Slack Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_OX1T"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" position="right" href="/sofie-core/docs/about-sofie">About Sofie</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â©2022 Norsk rikskringkasting AS and Contributors</div></div></div></footer></div>
<script src="/sofie-core/assets/js/runtime~main.117ccbe9.js"></script>
<script src="/sofie-core/assets/js/main.fb31a504.js"></script>
</body>
</html>